<!DOCTYPE html>
<html>
<head>
    <title>Three.js WebXR PoC</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }

        /* Stil für die interaktive Info-Box */
        #info-box {
            /* ... (Ihr bestehender Stil) ... */
        }
        
        /* NEU: Stil für den iOS-Fallback-Button */
        #ios-fallback-button {
            position: absolute; 
            bottom: 20px; 
            left: 50%; 
            transform: translateX(-50%);
            padding: 15px 30px; 
            background-color: #007aff; 
            color: white; 
            font-size: 18px;
            font-family: sans-serif;
            border-radius: 10px;
            text-decoration: none;
            display: none; /* Am Anfang versteckt */
            z-index: 1001;
        }
    </style>
</head>
<body>
    <div id="info-box">
        <div id="info-content"></div>
    </div>
    
    <a id="ios-fallback-button" href="./3DModel/neuerHafen.usdz" rel="ar">
        AR mit iOS starten (Quick Look)
    </a>

    <script type="importmap">{ "imports": { "three": "https://unpkg.com/three@0.158.0/build/three.module.js" } }</script>
    <script type="module" src="main.js"></script>
    
    <script>
        function isIOS() {
            // Vereinfachte iOS-Erkennung (funktioniert für die meisten iPhones/iPads)
            return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        }

        if (isIOS()) {
            // Verzögerung, um sicherzustellen, dass der Three.js ARButton erstellt wurde
            setTimeout(() => {
                const arButton = document.getElementById('ARButton'); // ID des Three.js ARButtons
                const fallbackButton = document.getElementById('ios-fallback-button');
                
                // Den von Three.js erstellten Button verstecken
                if (arButton) arButton.style.display = 'none';
                
                // Den nativen iOS-Fallback-Button anzeigen
                if (fallbackButton) fallbackButton.style.display = 'block';
                
            }, 500); 
        }
    </script>
</body>
</html>