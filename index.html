<!DOCTYPE html>
<html>
<head>
    <title>Neuer Hafen AR</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://unpkg.com/@editmode/aframe-webxr-ar-mode-ui/dist/aframe-webxr-ar-mode-ui.js"></script>
</head>
<body>
    <a-scene 
        webxr="requiredFeatures: hit-test, local-floor; optionalFeatures: dom-overlay; referenceSpaceType: local;"
        ar-mode-ui
        renderer="logarithmicDepthBuffer: true;">
        
        <a-gltf-model 
            src="./3DModel/neuerHafen.glb" 
            scale="1 1 1" 
            id="my-model"
            gltf-model="draco: true;"
            ></a-gltf-model>

        <a-entity light="type: ambient; intensity: 1.0;"></a-entity>
        <a-entity light="type: directional; intensity: 0.5;" position="1 1 1"></a-entity>
    
        <a-camera></a-camera>
    </a-scene>
    
    <script>
        // Dieses Script ermöglicht es, das Modell nach dem Laden zu bewegen (Platzieren via Hit-Test)
        document.addEventListener('DOMContentLoaded', function() {
            const scene = document.querySelector('a-scene');
            const model = document.getElementById('my-model');
            
            scene.addEventListener('ar-hit-test-select', (event) => {
                if (event.detail.results.length > 0) {
                    const hit = event.detail.results[0];
                    const matrix = hit.pose.transform.matrix;
                    
                    // Setzt das Modell an die erkannte Position auf der Oberfläche
                    model.setAttribute('position', {
                        x: matrix[12],
                        y: matrix[13],
                        z: matrix[14]
                    });
                }
            });
        });
    </script>
</body>
</html>